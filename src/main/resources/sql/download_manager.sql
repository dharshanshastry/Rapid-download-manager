CREATE SCHEMA  DOWNLOAD_MANAGER;
CREATE TABLE IF NOT EXISTS DOWNLOAD_MANAGER.CATEGORY
(CATEGORY_ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
CATEGORY VARCHAR(50),FILE_EXTENSIONS VARCHAR(20000),
PARENT_CATEGORY_ID INTEGER,
PRIMARY KEY (CATEGORY_ID));

CREATE TABLE  IF NOT EXISTS DOWNLOAD_MANAGER.DOWNLOADS
(DOWNLOAD_ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
FILE_NAME VARCHAR(200),
FILE_SIZE VARCHAR(100),
FILE_PATH VARCHAR(2000),
URL VARCHAR(3000),
THREAD_COUNT INTEGER,
START_RANGE BIGINT,
CATEGORY_ID INTEGER,
STATUS_ID INTEGER,
SCHEDULER_ID INTEGER,
ADD_DATE TIMESTAMP,
COMPLETED_DATE TIMESTAMP,
PRIMARY KEY (DOWNLOAD_ID),
);


CREATE TABLE  IF NOT EXISTS DOWNLOAD_MANAGER.SCHEDULAR
(SCHEDULAR_ID BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
SCHEDULE_TIME DATE,
NO_OF_THREADS INTEGER,
PRIMARY KEY (SCHEDULAR_ID));

CREATE TABLE  IF NOT EXISTS DOWNLOAD_MANAGER.STATUS
(STATUS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) NOT NULL,
STATUS VARCHAR(50),
PRIMARY KEY (STATUS_ID));


ALTER TABLE DOWNLOAD_MANAGER.DOWNLOADS ADD CONSTRAINT  FK1 FOREIGN KEY (CATEGORY_ID) REFERENCES DOWNLOAD_MANAGER.CATEGORY(CATEGORY_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE DOWNLOAD_MANAGER.DOWNLOADS ADD CONSTRAINT   FK2 FOREIGN KEY (SCHEDULER_ID) REFERENCES DOWNLOAD_MANAGER.SCHEDULAR(SCHEDULAR_ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE DOWNLOAD_MANAGER.DOWNLOADS ADD CONSTRAINT   FK3 FOREIGN KEY (STATUS_ID) REFERENCES DOWNLOAD_MANAGER.STATUS(STATUS_ID) ON DELETE CASCADE ON UPDATE CASCADE;


INSERT  INTO DOWNLOAD_MANAGER.CATEGORY  VALUES
	(1, 'Categories','', 0),
	(2, 'Documents','.pdf,.doc,.docx,.xl,.xls,.txt,.xlsx,.csv,.log,.ppt,.pps,.xml,.pptx,.xlr', 1),
	(3, 'Music','.mp3,.wav,.aif,.mid,.wma,.ra,.m4a,.m3u,.iff', 1),
	(4, 'Videos','.mp4,.flv,.avi,.divx,.mkv,.wmv,.3g2,.3gp,.asx,.asf,.m4v,.mpg,.rm,.swf,.vob', 1),
	(5, 'Softwares','.dmg,.exe,.msi,.pkg,.apk,.app,.bat,.cgi,.com,.gadget,.jar,.pif,.vb,.wsf', 1),
	(6, 'Compressed','.zip,.gzip,.zipx,.7z,.gz,.rar,.tar.gz,.rpm', 1),
	(7, 'Web Pages','.html,.css,.js', 1),
	(8, 'Pictures','.jpeg,.jpg,.png,.gif,.bmp,.psd,.thm,.tif,.dds', 1),
	(9, 'Subtitles','.srt', 1),
	(10, 'Database','.accdb,.db,.dbf,.mdb,.pdb,.sql', 1),
	(11, 'Disk Image','.iso,.bin,.vcd,.mdf,.cue,.toast', 1),
	(12, 'Others','', 1);

	INSERT  INTO DOWNLOAD_MANAGER.STATUS  VALUES
	(1, 'Downloaded'),
	(2, 'Downloading'),
	(3, 'Queued'),
	(4, 'Unfinished'),
	(5, 'Scheduled'),
	(6, 'Failed');